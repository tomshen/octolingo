<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Octolingo">
    <Require feature="rpc"/>
    <Require feature="views"/>
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
      <script src="https://plus.google.com/hangouts/_/api/v1/hangout.js"></script>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
      <script src="https://162.243.204.184/message.js"></script>

      <script src="https://162.243.204.184/message-handler.js"></script>

      <div id="container">
      </div>


      <script id="app" type="text/javascript">
        var speechRecognition = null;
        var a = new MessageHandler("container", function (language) {
          speechRecognition.lang = language;
        });
        speechRecognition = initSpeechRecognition("en", function (event) {
          a.newMessage(new Message(gapi.hangout.getLocalParticipant().person.displayName,
            event.results[event.resultIndex][0].transcript, a.selectedLanguage))
        });
        speechRecognition.start();

        a.start();
      </script>
    ]]>
  </Content>
</Module>
